var l=(c,t,e)=>new Promise((a,i)=>{var m=r=>{try{s(e.next(r))}catch(n){i(n)}},d=r=>{try{s(e.throw(r))}catch(n){i(n)}},s=r=>r.done?a(r.value):Promise.resolve(r.value).then(m,d);s((e=e.apply(c,t)).next())});import{renderListWithTemplate as u,getDiscount as o}from"./utils.js";export default class y{constructor(t,e,a){this.category=t,this.dataSource=e,this.listElement=a}init(){return l(this,null,function*(){const t=document.querySelector("#product-card-template"),e=yield this.dataSource.getData(this.category);u(t,this.listElement,e,this.prepareTemplate)})}prepareTemplate(t,e){t.querySelector("#link").href+=e.Id,t.querySelector("#image").src=e.Images.PrimaryMedium,t.querySelector("#image").alt+=e.Name,t.querySelector(".card__brand").innerText=e.Brand.Name,t.querySelector(".card__name").innerText=e.NameWithoutBrand,t.querySelector(".product-card__price").innerText+=e.FinalPrice;const a=o(e.SuggestedRetailPrice,e.FinalPrice),i=t.querySelector(".discount");return a===0?i.classList.add("hide"):i.innerHTML=a+"% OFF!!!",t}}
